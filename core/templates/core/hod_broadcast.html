{% extends 'core/base.html' %}
{% block content %}

<div class="container mt-4" style="max-width: 700px;">

  <div class="card shadow border-0">
    <div class="card-header bg-primary text-white">
      <h4 class="mb-0">ğŸ“¢ Send Broadcast Message</h4>
    </div>

    <div class="card-body">

      <!-- Show success / error messages -->
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }} alert-dismissible fade show">
            {{ message }}
            <button class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        {% endfor %}
      {% endif %}

      <form method="POST">
        {% csrf_token %}
        
        <div class="mb-3">
          <label class="form-label"><strong>Message</strong></label>
          {{ form.content }}
        </div>

        <button class="btn btn-primary w-100">ğŸ“¤ Send Broadcast</button>
      </form>

    </div>
  </div>

  <div class="card shadow border-0 mt-4">
    <div class="card-header bg-dark text-white">
      <h5>ğŸ“œ Previous Broadcast Messages</h5>
    </div>
    
    <div class="card-body">
      {% if broadcasts %}
        {% for msg in broadcasts %}
          <div class="alert alert-info">
            <strong>{{ msg.sender.username }}</strong> ({{ msg.timestamp|date:"d M Y h:i A" }})<br>
            {{ msg.content }}
          </div>
        {% endfor %}
      {% else %}
        <p class="text-muted">No broadcasts sent yet.</p>
      {% endif %}
    </div>
  </div>

</div>

{% endblock %}
